{"ast":null,"code":"// api.js - helper for backend API calls with authentication\n\nconst API_BASE = process.env.REACT_APP_API_URL || 'https://apialchemistproject-backend-608187465720.us-central1.run.app';\n\n// Helper function to get auth headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('gcp_identity_token');\n  return token ? {\n    'Authorization': `Bearer ${token}`,\n    'Content-Type': 'application/json'\n  } : {\n    'Content-Type': 'application/json'\n  };\n};\n\n// Helper function to handle API responses with better error messages\nconst handleResponse = async response => {\n  if (!response.ok) {\n    let errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n    try {\n      const errorData = await response.json();\n      if (errorData.detail) {\n        errorMessage += ` - ${errorData.detail}`;\n      }\n    } catch (e) {\n      // Response might not be JSON\n    }\n    if (response.status === 401 || response.status === 403) {\n      errorMessage += ' - Please check your authentication token';\n      // Clear invalid token\n      localStorage.removeItem('gcp_identity_token');\n      localStorage.removeItem('user_email');\n    }\n    throw new Error(errorMessage);\n  }\n  return response.json();\n};\nexport async function fetchTodo() {\n  const res = await fetch(`${API_BASE}/todo`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\nexport async function fetchNBA() {\n  const res = await fetch(`${API_BASE}/nba`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\nexport async function draftMessage(data) {\n  const res = await fetch(`${API_BASE}/draft-message`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\nexport async function createCalendarInvite(data) {\n  const res = await fetch(`${API_BASE}/calendar-invite`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\nexport async function summarize(data) {\n  const res = await fetch(`${API_BASE}/summarize`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\nexport async function ingestData(data) {\n  const res = await fetch(`${API_BASE}/ingest-data`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\nexport async function fetchAggregation() {\n  const res = await fetch(`${API_BASE}/aggregation`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\nexport async function chat(data) {\n  console.log('Chat API called with:', data); // Debug log\n  console.log('API Base URL:', API_BASE); // Debug log\n  console.log('Auth Headers:', getAuthHeaders()); // Debug log\n\n  const res = await fetch(`${API_BASE}/chat`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  console.log('Chat Response Status:', res.status); // Debug log\n  const result = await handleResponse(res);\n  console.log('Chat Response Data:', result); // Debug log\n  return result;\n}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","getAuthHeaders","token","localStorage","getItem","handleResponse","response","ok","errorMessage","status","statusText","errorData","json","detail","e","removeItem","Error","fetchTodo","res","fetch","headers","fetchNBA","draftMessage","data","method","body","JSON","stringify","createCalendarInvite","summarize","ingestData","fetchAggregation","chat","console","log","result"],"sources":["/home/prakashb/Prakash/project_hackathon/frontend/src/api.js"],"sourcesContent":["// api.js - helper for backend API calls with authentication\n\nconst API_BASE = process.env.REACT_APP_API_URL || 'https://apialchemistproject-backend-608187465720.us-central1.run.app';\n\n// Helper function to get auth headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('gcp_identity_token');\n  return token ? {\n    'Authorization': `Bearer ${token}`,\n    'Content-Type': 'application/json'\n  } : {\n    'Content-Type': 'application/json'\n  };\n};\n\n// Helper function to handle API responses with better error messages\nconst handleResponse = async (response) => {\n  if (!response.ok) {\n    let errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n    \n    try {\n      const errorData = await response.json();\n      if (errorData.detail) {\n        errorMessage += ` - ${errorData.detail}`;\n      }\n    } catch (e) {\n      // Response might not be JSON\n    }\n    \n    if (response.status === 401 || response.status === 403) {\n      errorMessage += ' - Please check your authentication token';\n      // Clear invalid token\n      localStorage.removeItem('gcp_identity_token');\n      localStorage.removeItem('user_email');\n    }\n    \n    throw new Error(errorMessage);\n  }\n  return response.json();\n};\n\nexport async function fetchTodo() {\n  const res = await fetch(`${API_BASE}/todo`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchNBA() {\n  const res = await fetch(`${API_BASE}/nba`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function draftMessage(data) {\n  const res = await fetch(`${API_BASE}/draft-message`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function createCalendarInvite(data) {\n  const res = await fetch(`${API_BASE}/calendar-invite`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function summarize(data) {\n  const res = await fetch(`${API_BASE}/summarize`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function ingestData(data) {\n  const res = await fetch(`${API_BASE}/ingest-data`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchAggregation() {\n  const res = await fetch(`${API_BASE}/aggregation`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function chat(data) {\n  console.log('Chat API called with:', data); // Debug log\n  console.log('API Base URL:', API_BASE); // Debug log\n  console.log('Auth Headers:', getAuthHeaders()); // Debug log\n  \n  const res = await fetch(`${API_BASE}/chat`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  \n  console.log('Chat Response Status:', res.status); // Debug log\n  const result = await handleResponse(res);\n  console.log('Chat Response Data:', result); // Debug log\n  return result;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}