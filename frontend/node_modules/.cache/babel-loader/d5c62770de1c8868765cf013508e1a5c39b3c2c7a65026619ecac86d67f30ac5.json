{"ast":null,"code":"// api.js - helper for backend API calls with authentication and advisor context\nconst API_BASE=process.env.REACT_APP_API_URL||'https://apialchemistproject-backend-608187465720.us-central1.run.app';// Helper function to get auth headers with advisor context\nconst getAuthHeaders=()=>{const token=localStorage.getItem('gcp_token');const advisorData=localStorage.getItem('advisor_data');const userEmail=localStorage.getItem('user_email');const headers={'Content-Type':'application/json'};if(token){headers['Authorization']=`Bearer ${token}`;}if(advisorData){const advisor=JSON.parse(advisorData);headers['X-Advisor-ID']=advisor.advisor_id;headers['X-Advisor-Email']=advisor.email;}if(userEmail){headers['X-User-Email']=userEmail;}return headers;};// Helper function to get current advisor ID\nconst getCurrentAdvisorId=()=>{const advisorData=localStorage.getItem('advisor_data');if(advisorData){const advisor=JSON.parse(advisorData);return advisor.advisor_id;}return'ADV001';// Default advisor\n};// Helper function to handle API responses with better error messages\nconst handleResponse=async response=>{if(!response.ok){let errorMessage=`HTTP ${response.status}: ${response.statusText}`;try{const errorData=await response.json();if(errorData.detail){errorMessage+=` - ${errorData.detail}`;}}catch(e){// Response might not be JSON\n}if(response.status===401||response.status===403){errorMessage+=' - Please check your authentication token';// Clear invalid token\nlocalStorage.removeItem('gcp_token');localStorage.removeItem('user_email');}throw new Error(errorMessage);}return response.json();};export async function fetchTodo(){const advisorId=getCurrentAdvisorId();const res=await fetch(`${API_BASE}/todo?advisor_id=${advisorId}`,{headers:getAuthHeaders()});return handleResponse(res);}export async function fetchNBA(){const advisorId=getCurrentAdvisorId();const res=await fetch(`${API_BASE}/nba?advisor_id=${advisorId}`,{headers:getAuthHeaders()});return handleResponse(res);}export async function draftMessage(data){const res=await fetch(`${API_BASE}/draft-message`,{method:'POST',headers:getAuthHeaders(),body:JSON.stringify(data)});return handleResponse(res);}export async function createCalendarInvite(data){const res=await fetch(`${API_BASE}/calendar-invite`,{method:'POST',headers:getAuthHeaders(),body:JSON.stringify(data)});return handleResponse(res);}export async function summarize(data){const res=await fetch(`${API_BASE}/summarize`,{method:'POST',headers:getAuthHeaders(),body:JSON.stringify(data)});return handleResponse(res);}export async function ingestData(data){const res=await fetch(`${API_BASE}/ingest-data`,{method:'POST',headers:getAuthHeaders(),body:JSON.stringify(data)});return handleResponse(res);}export async function fetchClients(){const advisorId=getCurrentAdvisorId();const res=await fetch(`${API_BASE}/clients?advisor_id=${advisorId}`,{headers:getAuthHeaders()});return handleResponse(res);}export async function fetchAggregation(){const advisorId=getCurrentAdvisorId();const res=await fetch(`${API_BASE}/aggregation?advisor_id=${advisorId}`,{headers:getAuthHeaders()});return handleResponse(res);}export async function chat(data){const advisorId=getCurrentAdvisorId();const res=await fetch(`${API_BASE}/chat`,{method:'POST',headers:getAuthHeaders(),body:JSON.stringify({...data,advisor_id:advisorId})});return handleResponse(res);}export async function fetchDashboardMetrics(){const res=await fetch(`${API_BASE}/dashboard-metrics`,{headers:getAuthHeaders()});return handleResponse(res);}export async function fetchLookerIntegration(){const res=await fetch(`${API_BASE}/looker-integration`,{headers:getAuthHeaders()});return handleResponse(res);}export async function fetchAIInsights(){const res=await fetch(`${API_BASE}/ai-insights`,{headers:getAuthHeaders()});return handleResponse(res);}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","getAuthHeaders","token","localStorage","getItem","advisorData","userEmail","headers","advisor","JSON","parse","advisor_id","email","getCurrentAdvisorId","handleResponse","response","ok","errorMessage","status","statusText","errorData","json","detail","e","removeItem","Error","fetchTodo","advisorId","res","fetch","fetchNBA","draftMessage","data","method","body","stringify","createCalendarInvite","summarize","ingestData","fetchClients","fetchAggregation","chat","fetchDashboardMetrics","fetchLookerIntegration","fetchAIInsights"],"sources":["/home/prakashb/Prakash/project_hackathon/frontend/src/api.js"],"sourcesContent":["// api.js - helper for backend API calls with authentication and advisor context\n\nconst API_BASE = process.env.REACT_APP_API_URL || 'https://apialchemistproject-backend-608187465720.us-central1.run.app';\n\n// Helper function to get auth headers with advisor context\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('gcp_token');\n  const advisorData = localStorage.getItem('advisor_data');\n  const userEmail = localStorage.getItem('user_email');\n  \n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  \n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  \n  if (advisorData) {\n    const advisor = JSON.parse(advisorData);\n    headers['X-Advisor-ID'] = advisor.advisor_id;\n    headers['X-Advisor-Email'] = advisor.email;\n  }\n  \n  if (userEmail) {\n    headers['X-User-Email'] = userEmail;\n  }\n  \n  return headers;\n};\n\n// Helper function to get current advisor ID\nconst getCurrentAdvisorId = () => {\n  const advisorData = localStorage.getItem('advisor_data');\n  if (advisorData) {\n    const advisor = JSON.parse(advisorData);\n    return advisor.advisor_id;\n  }\n  return 'ADV001'; // Default advisor\n};\n\n// Helper function to handle API responses with better error messages\nconst handleResponse = async (response) => {\n  if (!response.ok) {\n    let errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n    \n    try {\n      const errorData = await response.json();\n      if (errorData.detail) {\n        errorMessage += ` - ${errorData.detail}`;\n      }\n    } catch (e) {\n      // Response might not be JSON\n    }\n    \n    if (response.status === 401 || response.status === 403) {\n      errorMessage += ' - Please check your authentication token';\n      // Clear invalid token\n      localStorage.removeItem('gcp_token');\n      localStorage.removeItem('user_email');\n    }\n    \n    throw new Error(errorMessage);\n  }\n  return response.json();\n};\n\nexport async function fetchTodo() {\n  const advisorId = getCurrentAdvisorId();\n  const res = await fetch(`${API_BASE}/todo?advisor_id=${advisorId}`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchNBA() {\n  const advisorId = getCurrentAdvisorId();\n  const res = await fetch(`${API_BASE}/nba?advisor_id=${advisorId}`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function draftMessage(data) {\n  const res = await fetch(`${API_BASE}/draft-message`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function createCalendarInvite(data) {\n  const res = await fetch(`${API_BASE}/calendar-invite`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function summarize(data) {\n  const res = await fetch(`${API_BASE}/summarize`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function ingestData(data) {\n  const res = await fetch(`${API_BASE}/ingest-data`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify(data)\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchClients() {\n  const advisorId = getCurrentAdvisorId();\n  const res = await fetch(`${API_BASE}/clients?advisor_id=${advisorId}`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchAggregation() {\n  const advisorId = getCurrentAdvisorId();\n  const res = await fetch(`${API_BASE}/aggregation?advisor_id=${advisorId}`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function chat(data) {\n  const advisorId = getCurrentAdvisorId();\n  const res = await fetch(`${API_BASE}/chat`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify({\n      ...data,\n      advisor_id: advisorId\n    })\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchDashboardMetrics() {\n  const res = await fetch(`${API_BASE}/dashboard-metrics`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchLookerIntegration() {\n  const res = await fetch(`${API_BASE}/looker-integration`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n\nexport async function fetchAIInsights() {\n  const res = await fetch(`${API_BASE}/ai-insights`, {\n    headers: getAuthHeaders()\n  });\n  return handleResponse(res);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}